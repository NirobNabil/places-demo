(this.webpackJsonpplaces_demo=this.webpackJsonpplaces_demo||[]).push([[0],{177:function(e,t,a){e.exports=a.p+"static/media/logo.7dfafbe0.png"},180:function(e,t,a){e.exports=a(394)},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},394:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(4),r=a.n(i),l=(a(185),a(35)),c=a(36),s=a(38),u=a(37),d=a(39),g=(a(186),a(187),a(68)),p=a(396),m=a(397),h=a(48),f=a(174),v="AIzaSyC4q0S0GbA-cxRC_4ZVcd6AOeW3Yjt10tE",b=a(162),k=g.a.Option;var C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).setSearchbarDefaultCoordinate=function(e){a.props.form.setFields({latitude:{value:e.latitude},longitude:{value:e.longitude}})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||(console.log("Received values of form: ",t),console.log("went"),a.props.find_places(t))}))},console.log("gggggggggggggggggggggggggggggggggggggggg"),console.log(e),a.props.set_setSearchbarDefaultCoordinate(a.setSearchbarDefaultCoordinate),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,a=(e.getFieldsError,e.getFieldError),n=e.isFieldTouched;n("username")&&a("username"),n("password")&&a("password");return o.a.createElement(p.a,{layout:"inline",onSubmit:this.handleSubmit},o.a.createElement(p.a.Item,{validateStatus:"success"},t("latitude",{rules:[{required:!0,message:"Please input your Latitude!"}]})(o.a.createElement(m.a,{className:"inputNumber",placehoder:"Latitude"}))),o.a.createElement(p.a.Item,{validateStatus:"success"},t("longitude",{rules:[{required:!0,message:"Please input your Longitude"}]})(o.a.createElement(m.a,{className:"inputNumber",placeholder:"Longitude"}))),o.a.createElement(p.a.Item,{validateStatus:"success"},t("radius",{rules:[{required:!0,message:"Please input your range"}]})(o.a.createElement(m.a,{className:"inputNumber",placeholder:"radius"}))),o.a.createElement(p.a.Item,{validateStatus:"success"},t("filters",{rules:[{required:!0,message:" "}]})(o.a.createElement(g.a,{mode:"multiple",style:{width:"25em",flexGrow:"1"},placeholder:"Please select"},["restaurant","movie_theater","atm","mosque","bank","doctor"].map((function(e){return o.a.createElement(k,{key:e}," ",e," ")}))))),o.a.createElement(p.a.Item,null,o.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Search"),o.a.createElement(h.a,{type:"primary",className:"toCSVButton"},o.a.createElement(b.CSVLink,{data:this.props.places},"-> CSV")),1==this.props.loading?o.a.createElement(f.a,{className:"spin"}):o.a.createElement(o.a.Fragment,null)))}}]),t}(o.a.Component),E=p.a.create({name:"SearchBar"})(C),y=a(398),S=a(395),w=[{title:"icon",dataIndex:"icon",key:"icon",render:function(e){return o.a.createElement("img",{src:e})}},{title:"Name",dataIndex:"name",key:"name",render:function(e){return o.a.createElement("a",null,e)}},{title:"vicinity",dataIndex:"vicinity",key:"vicinity"},{title:"Lat/Lon",dataIndex:"coordinate"},{title:"Tags",key:"tags",dataIndex:"tags",render:function(e){return o.a.createElement("span",null,e.map((function(e){return o.a.createElement(y.a,{key:e},e.toUpperCase())})))}}],j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={dataSource:{}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(S.a,{columns:w,dataSource:this.props.data.map((function(e,t){return{key:t,name:e.name,icon:e.icon,coordinate:"".concat(e.geometry.location.lat()," , ").concat(e.geometry.location.lng()),tags:e.types,vicinity:e.vicinity}}))})}}]),t}(o.a.Component),M=a(57),P={margin:"3em"},O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).map={},a.state={showingInfoWindow:!1,activeMarkers:{},selectedPlaces:{},selectedPlace:{},manual:!1,currentLocation:{},loaded:!0,map:{}},a.onMarkerClick=function(e,t,n){return a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.onClose=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.panMapTo=function(){},a.setMap=function(e,t){console.log("ayhy"),console.log(e),console.log(t),a.setState({map:t}),console.log(a.fetchPlaces),window.fetchPlaces=a.fetchPlaces,a.props.set_getPlaces(a.fetchPlaces)},a.fetchPlaces=function(e,t,n,o){console.log("came fetchplaces");var i=new a.props.google.maps.places.PlacesService(a.state.map),r=new a.props.google.maps.LatLng(e.latitude,e.longitude),l=[];n.forEach((function(e,a){console.log(n.length,a);var c={location:r,radius:t,type:e};console.log("gge pringting"),i.nearbySearch(c,(function(e){var t,i;console.log(e),t=e,i=a==n.length-1,l=l.concat(t),console.log("places data"),console.log(t),console.log(l),i&&(console.log("came"),o(l))}))}))},a.handleClick=function(e,t,n){a.props.updateCurrentLocation({latitude:n.latLng.lat(),longitude:n.latLng.lng()})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.state.loaded?o.a.createElement(M.Map,{google:this.props.google,zoom:14,style:P,onReady:this.setMap,initialCenter:{lat:this.props.mapCenter.latitude,lng:this.props.mapCenter.longitude},onClick:this.handleClick},o.a.createElement(M.Marker,{onClick:this.onMarkerClick,name:"Selected location",position:{lat:this.props.mapCenter.latitude,lng:this.props.mapCenter.longitude}}),this.props.places.map((function(t){return o.a.createElement(M.Marker,{key:t.coordinate.latitude,onClick:e.onMarkerClick,name:t.name,position:{lat:t.coordinate.latitude,lng:t.coordinate.longitude}})})),o.a.createElement(M.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onClose:this.onClose},o.a.createElement("div",null,o.a.createElement("h4",null,this.state.selectedPlace.name)))):o.a.createElement("div",null,' "loading" ')}}]),t}(o.a.Component),L=Object(M.GoogleApiWrapper)({apiKey:v})(O),_=a(177),I=a.n(_),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).set_setSearchbarDefaultCoordinate=function(e){a.setState({setSearchbarCoordinate:e})},a.set_getPlaces=function(e){console.log("in appjs setgetplaces",e),a.setState({getPlaces:e})},a.set_places=function(e){a.setState({places:e}),a.state.places.forEach((function(e){a.addMarker({latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng(),name:e.name})})),a.setState({serachBarLoadingState:!1}),console.log("set places"),console.log(a.state.places)},a.find_places=function(e){a.addMarker({latitude:e.latitude,longitude:e.longitude}),a.setState({serachBarLoadingState:!0}),a.state.getPlaces({latitude:e.latitude,longitude:e.longitude},e.radius,e.filters,a.set_places)},a.addMarker=function(e){var t=a.state.activeMarkers;t.push({latitude:e.latitude,longitude:e.longitude,name:e.name?e.name:"".concat(e.latitude,", ").concat(e.longitude)}),a.setState({activeMarkers:t})},a.updateCurrentLocation=function(e){a.setState({mapCenter:{latitude:e.latitude,longitude:e.longitude},places:[],activeMarkers:[]}),a.state.setSearchbarCoordinate({latitude:e.latitude,longitude:e.longitude})},a.componentDidMount=function(){navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;a.setState({mapCenter:{latitude:t.latitude,longitude:t.longitude},loaded:!0}),a.state.setSearchbarCoordinate({latitude:t.latitude,longitude:t.longitude})}))},a.state={activeMarkers:[],mapCenter:{},getPlaces:{},places:[],setSearchbarCoordinate:{},serachBarLoadingState:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"motherContainer"},o.a.createElement("div",{className:"search"},o.a.createElement("div",{class:"protip"},o.a.createElement("img",{width:"300px",src:I.a}),o.a.createElement("h1",null,"Places Near You"),o.a.createElement("span",null,"Click one anywhere on the map to select the coordinate")),o.a.createElement(E,{places:this.state.places,loading:this.state.serachBarLoadingState,set_setSearchbarDefaultCoordinate:this.set_setSearchbarDefaultCoordinate,find_places:this.find_places.bind(this),currentLocation:this.state.mapCenter})),o.a.createElement("div",{className:"result"},o.a.createElement("div",{className:"map"},this.state.loaded?o.a.createElement(L,{places:this.state.activeMarkers.map((function(e){return{name:e.name,coordinate:{latitude:e.latitude,longitude:e.longitude}}})),mapCenter:this.state.mapCenter,set_getPlaces:this.set_getPlaces,set_places:this.set_places,addMarker:this.addMarker.bind(this),updateCurrentLocation:this.updateCurrentLocation}):o.a.createElement(o.a.Fragment,null)),o.a.createElement("div",{className:"table"},o.a.createElement(j,{data:this.state.places}))))}}]),t}(o.a.Component),W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(o.a.createElement(N,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/places-demo",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/places-demo","/service-worker.js");W?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):x(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):x(t,e)}))}}()}},[[180,1,2]]]);
//# sourceMappingURL=main.b5991ee2.chunk.js.map